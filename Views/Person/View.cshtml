@* THIS CODE WAS GENERATED BY A TOOL (Codification) *@

@{
	ViewBag.Title = "View Person";
	ViewBag.ngApp = "App";
	ViewBag.ngController = "ViewPersonController";
}

<h3>Person</h3>

<div class="row">
	<div class="col-md-2">
		<label class="control-label" for="txtPersonID">Person ID:</label>
		<input disabled id="txtPersonID" type="text" ng-model="person.personID" placeholder="Person ID" class="form-control input-md " required/>
	</div>
</div>

<div class="row">
	<div class="col-md-2">
		<label class="control-label" for="txtName">Name:</label>
		<input id="txtName" type="text" ng-model="person.name" placeholder="Name" class="form-control input-md " required/>
	</div>
</div>


<br/>

<div class="row">	
	<div class="col-md-12">
		<input type="Button" class="btn btn-primary" ng-click="save()" value="Save" />&nbsp;<input type="Button" class="btn btn-warning" ng-click="cancel()" value="Cancel" />&nbsp;<input type="Button" class="btn btn-danger" ng-click="delete()" value="Delete" />
	</div>
</div>

<br/>

<script type="text/javascript">
	"use strict";

	var app = angular.module('@ViewBag.ngApp', []);

	app.controller('@ViewBag.ngController', ['$scope', '$http',

		function ($scope, $http) {
    
			$scope.dialog = '@ViewBag.Dialog' == 'True';

			$scope.get = function () {
					
				$http.get('/api/PersonAPI/@ViewBag.PersonID').success(function (data) {
					$scope.person = data;
				}).error(function (data) {
					alert("Error getting");
				});
				
			}
      
			$scope.closeParentDialog = function()
			{
				try
				{
					window.parent.closeDialog();
					return true;
				}
				catch(ex)
				{
					return false;
				}
			}
      
			$scope.cancel = function()
			{
				if ('@ViewBag.Dialog' == 'True')
				{
					$scope.closeParentDialog();
				}
				else
				{
					window.history.back();
				}
			}
			
	
			
			$scope.save = function () {
				
				if (@ViewBag.PersonID > 0)
				{
					$http.put('/api/PersonAPI/@ViewBag.PersonID', $scope.person).success(function (data) {
						niceAlert("Saved");
					}).error(function (data) {
						niceAlert("Error saving");
					});
				}
				else
				{
					$http.post('/api/PersonAPI', $scope.person).success(function (data) {
						niceAlert("Created");
						if ('@ViewBag.Dialog' == 'True')
						{
							$scope.closeParentDialog();
						}
						else
						{
							window.setTimeout('window.history.back()', 2000);
						}
					}).error(function (data) {
						niceAlert("Error creating");
					});
				}
					
			}
			
			$scope.delete = function () {
				
				if (window.confirm("Are you sure?"))
				{
					$http.delete('/api/PersonAPI/@ViewBag.PersonID').success(function (data) {
						niceAlert("Deleted");
						window.location.href='../../Person';
					}).error(function (data) {
						niceAlert("Error deleting");
					});
				}
				
			}
			
			$scope.get();
			
	

		}

	]);

</script>

	