
@* THIS CODE WAS GENERATED BY A TOOL (Codification) *@

@{
	ViewBag.Title = "View Chore";
	ViewBag.ngApp = "App";
	ViewBag.ngController = "ViewChoreController";
}

<h3>Chore</h3>

<div class="row">
	<div class="col-md-2">
		<label class="control-label" for="txtChoreID">Chore ID:</label>
		<input disabled id="txtChoreID" type="text" ng-model="chore.choreID" placeholder="Chore ID" class="form-control input-md " required/>
	</div>
	<div class="col-md-2">
		<label class="control-label" for="txtName">Name:</label>
		<input id="txtName" type="text" ng-model="chore.name" placeholder="Name" class="form-control input-md " required/>
	</div>
</div>

<div class="row">
	<div class="col-md-4">
		<label class="control-label" for="txtDescription">Description:</label>
		<input id="txtDescription" type="text" ng-model="chore.description" placeholder="Description" class="form-control input-md " required/>
	</div>
</div>

<div class="row">
	<div class="col-md-2">
		<label class="control-label" for="txtFrequency">Frequency:</label>
		<input id="txtFrequency" type="text" ng-model="chore.frequency" placeholder="Frequency" class="form-control input-md " required/>
	</div>
	<div class="col-md-2">
		<label class="control-label" for="txtLastDoneDate">Last Done Date:</label>
		<input id="txtLastDoneDate" type="text" ng-model="chore.lastDoneDateString" placeholder="Last Done Date" class="form-control input-md date" />
	</div>
</div>

<div class="row">
	<div class="col-md-2">
		<label class="control-label" for="txtLastDonePersonID">Last Done Person ID:</label>
		<select id="cboLastDonePersonID" ng-model="chore.lastDonePersonID" ng-options="value.id as value.name for (key, value) in PersonList" class="form-control input-md" >
		</select>
	</div>
</div>


<br/>

<div class="row">	
	<div class="col-md-12">
		<input type="Button" class="btn btn-primary" ng-click="save()" value="Save" />&nbsp;<input type="Button" class="btn btn-warning" ng-click="cancel()" value="Cancel" />&nbsp;<input type="Button" class="btn btn-danger" ng-click="delete()" value="Delete" />
	</div>
</div>

<br/>

<script type="text/javascript">
	"use strict";

	var app = angular.module('@ViewBag.ngApp', []);

	app.controller('@ViewBag.ngController', ['$scope', '$http',

		function ($scope, $http) {
    
			$scope.dialog = '@ViewBag.Dialog' == 'True';

			$scope.get = function () {
					
				$http.get('/api/ChoreAPI/@ViewBag.ChoreID').success(function (data) {
					$scope.chore = data;
				}).error(function (data) {
					alert("Error getting");
				});
				
			}
      
			$scope.closeParentDialog = function()
			{
				try
				{
					window.parent.closeDialog();
					return true;
				}
				catch(ex)
				{
					return false;
				}
			}
      
			$scope.cancel = function()
			{
				if ('@ViewBag.Dialog' == 'True')
				{
					$scope.closeParentDialog();
				}
				else
				{
					window.history.back();
				}
			}
			
	
			$scope.getPersonList = function () {
				$http.get('/api/PersonAPI').success(function (data) {
					$scope.PersonList = data;
				}).error(function (data) {
					niceAlert("Error getting");
				});
			}
		
			
			$scope.save = function () {
				
				if (@ViewBag.ChoreID > 0)
				{
					$http.put('/api/ChoreAPI/@ViewBag.ChoreID', $scope.chore).success(function (data) {
						niceAlert("Saved");
						window.setTimeout('window.location="/Chore"', 2000);
					}).error(function (data) {
						niceAlert("Error saving");
					});
				}
				else
				{
					$http.post('/api/ChoreAPI', $scope.chore).success(function (data) {
						niceAlert("Created");
						if ('@ViewBag.Dialog' == 'True')
						{
							$scope.closeParentDialog();
						}
						else
						{
							window.setTimeout('window.location="/Chore"', 2000);
						}
					}).error(function (data) {
						niceAlert("Error creating");
					});
				}
					
			}
			
			$scope.delete = function () {
				
				if (window.confirm("Are you sure?"))
				{
					$http.delete('/api/ChoreAPI/@ViewBag.ChoreID').success(function (data) {
						niceAlert("Deleted");
						window.setTimeout('window.location="/Chore"', 2000);
					}).error(function (data) {
						niceAlert("Error deleting");
					});
				}
				
			}
			
			$scope.get();
			
	
			$scope.getPersonList();
		

		}

	]);

</script>

	